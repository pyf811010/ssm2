<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta charset="utf-8"/>
    <title>人体运动测试数据管理</title>
    <meta name="description" content="Dynamic tables and grids using jqGrid plugin"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"/>

    <!-- bootstrap & fontawesome -->
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/assets/font-awesome/4.5.0/css/font-awesome.min.css"/>

    <!-- page specific plugin styles -->
    <link rel="stylesheet" href="/assets/css/jquery-ui.min.css"/>
    <link rel="stylesheet" href="/assets/css/bootstrap-datepicker3.min.css"/>
    <link rel="stylesheet" href="/assets/css/ui.jqgrid.min.css"/>
    <link rel="stylesheet" href="/assets/css/loading.css" />

    <!-- text fonts -->
    <link rel="stylesheet" href="/assets/css/fonts.googleapis.com.css"/>

    <!-- ace styles -->
    <link rel="stylesheet" href="/assets/css/ace.min.css" class="ace-main-stylesheet" id="main-ace-style"/>
    <link rel="stylesheet" href="/assets/css/ace-skins.min.css"/>
    <link rel="stylesheet" href="/assets/css/ace-rtl.min.css"/>
    <script src="/assets/js/ace-extra.min.js"></script>
</head>


<body class="no-skin">
<div id="loading">
		<img src="/assets/css/images/loading.gif">
	</div>
<div id="header"></div>
<!--页面顶部栏  -->
<div class="main-container ace-save-state" id="main-container">
    <script type="text/javascript">
        try {
            ace.settings.loadState('main-container')
        } catch (e) {
        }
    </script>

    <div id="sidebar" class="sidebar                  responsive                    ace-save-state">
        <script type="text/javascript">
            try {
                ace.settings.loadState('sidebar')
            } catch (e) {
            }
        </script>

        <div id="lefter"></div>
        <!--页面左部导航栏  -->

    </div>

    <div class="main-content">
        <div class="main-content-inner">
            <div class="breadcrumbs ace-save-state" id="breadcrumbs">
                <ul class="breadcrumb">
                    <li>
                        <i class="ace-icon fa fa-home home-icon"></i>
                        <a href="/view_user/index_user.html">首页</a>
                    </li>

                    <li class="active">主成分分析</li>
                </ul>
                <!-- /.breadcrumb -->

            </div>
            <div class="page-content">

					<div class="row">

						<div class="col-xs-12">
							<div class="col-xs-12">
								<!-- PAGE CONTENT BEGINS -->
								<form class="form-horizontal" role="form">

									<div class="row">

										<!-- /.span -->

										<div class="col-xs-12 col-sm-4">
											<div class="widget-box">
												<div class="widget-header">
													<h4 class="widget-title">选择需要分析的动作</h4>
													<span class="widget-toolbar"></span>
												</div>

												<div class="widget-body">
													<div class="widget-main">


														<!--  <div class="form-group" style="margin-top: 20px;">
                                                    <div class="col-xs-12">
                                                        <input  type="file" id="files" />
                                                    </div>
                                                </div>
 -->
														<div style="margin-bottom: 12px;">
															<label for="fi_info" style="margin-bottom: 8px;">实验方式：</label>
															<select id="selectid"
																style="width: 188px; margin-left: 10px">
																<option value="">请选择</option>
															</select>
														</div>
														<div class="clearfix form-actions">
															<p>

																<button class="btn btn-yellow" type="button"
																	onclick="openApp()" id="openApplication">打开分析程序</button>
																<button class="btn btn-purple" type="button"
																	onclick="getValue()" id="fileCommit">拷贝到本地</button>

																<button class="btn" type="reset">
																	<i class="ace-icon fa fa-undo bigger-110"></i> 重置
																</button>

															</p>
														</div>

													</div>
												</div>
											</div>
										</div>
										<div class="col-sm-6">
											<!-- <button type="button" class="close" data-dismiss="alert">
                                <i class="ace-icon fa fa-times"></i>
                            </button> -->

											<i class="ace-icon fa fa-check black"></i> <span
												style="font-size: 15px; color: #000000;">欢迎使用&nbsp;</span> <strong
												class="black" style="font-size: 15px; color: #000000;">
												<span style="font-size: 15px;">人体运动测试数据分析与管理系统</span> <small>(v
													1.0)</small> <br> <span style="font-size: 15px;">主成分分析：</span><br>
											</strong> 
											<span style="font-size: 15px;">
											此模块用于主成分分析，请确保分析程序已安装在D:\Program\MLR_Program\目录下。
											<br>
											选择动作后，单击拷贝到本地，文件默认拷贝到D:\MLR_Data\目录下。
											</span>	
										</div>
										<!-- /.span -->
									</div>
									<!-- /.row -->

									<div class="space-24"></div>

									<div class="hr hr-24"></div>

								</form>

								<div class="hr hr-18 dotted hr-double"></div>
								<div class="row"></div>
								<!-- PAGE CONTENT ENDS -->
							</div>

							<!-- PAGE CONTENT BEGINS -->
							<!-- 下载模板 -->


							<!-- PAGE CONTENT ENDS -->
						</div>
						<!-- /.col -->
					</div>
					<!-- /.row -->
				</div>
            <!-- /.page-content -->
        </div>
    </div>
    <!-- /.main-content -->
    <div id="footer"></div>
    <!--页面底部栏  -->

    <a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
        <i class="ace-icon fa fa-angle-double-up icon-only bigger-110"></i>
    </a>
</div>
<!-- /.main-container -->

<!-- basic scripts -->

<!--[if !IE]> -->
<script src="/assets/js/jquery-2.1.4.min.js"></script>
<script src="/assets/js/jquery.form.js"></script>
<script src="/assets/js/jquery.cookie.js"></script>
<script src="/assets/js/ssm2.util.js"></script>

<!-- <![endif]-->

<!--[if IE]>
<script src="/assets/js/jquery-1.11.3.min.js"></script>
<![endif]-->
<script type="text/javascript">
    if ('ontouchstart' in document.documentElement) document.write("<script src='/assets/js/jquery.mobile.custom.min.js'>" + "<" + "/script>");
</script>
<script src="/assets/js/bootstrap.min.js"></script>

<!-- page specific plugin scripts -->
<script src="/assets/js/bootstrap-datepicker.min.js"></script>
<script src="/assets/js/jquery.jqGrid.min.js"></script>
<script src="/assets/js/grid.locale-cn.js"></script>

<!-- ace scripts -->
<script src="/assets/js/ace-elements.min.js"></script>
<script src="/assets/js/ace.min.js"></script>

<!-- inline scripts related to this page -->




<!--上面代码用来设置水平滚动条  -->
<!--文件上传-->
<script type="text/javascript">
    //ajax请求数据
    function hideloading() {
	    $("#loading").attr("style", "display:none;");
	    console.log("hide");
	}
	
	function showloading() {
	    $("#loading").attr("style", "display:block;");
	    console.log("show");
	}
   function openApp(){
		$.ajax({
			type: "post",
			url: "/AnalyzeProgram/MLR_DataAnalysis"
		});
	}

    function getValue(){
        var str = $("#selectid option:selected").val();   //获得选中的值
        showloading();
        $.ajax({
            type:"post",
            dataType:"json",
            url:"/FilesKand/batchDownload/",
            data:{'fi_info':str},
            success: function (data) {
            	hideloading();
                if (data.success == 1) {
                    alert("下载成功!");
                }else if(data.success == 0){
                	alert(data.info);
                }else{
                	alert("下载失败");
                }
            },
            error: function (err) {
            	hideloading();
                alert("文件下载遇到错误!" + JSON.stringify(err));
            }
        });
    }
    jQuery(function ($) {
    	$.ajax({
    		url: "/preec/findDistinctActions",
    		type: "get",
    		dataType:"json",
    		success:function(data){
    			for (var i=0; i<data.length;i++) {
    				var value=data[i];
    				$('#selectid').append("<option>"+value+"</option>");
    			}
    		},
    		error:function(data){
    			alert("查询动作过程中出错，请检查数据库");
    		}
    	});
    	$("#header").load("/view_user/header_user.html");
    	$("#lefter").load("/view_user/lefter_user.html", function () {
            $("#main").prop("class", "");
            $(".kandAnalysis").prop("class", "active");
            $("#dataAnalyze").prop("style", "display: block;");
            $("#footer").load("/view_user/footer_user.html");
        });
    });
</script>


</body>

</html>