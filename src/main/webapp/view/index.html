<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta charset="utf-8"/>
    <title>首页</title>

    <meta name="description" content="overview &amp; stats"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"/>

    <!-- bootstrap & fontawesome -->
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/assets/font-awesome/4.5.0/css/font-awesome.min.css"/>

    <!-- page specific plugin styles -->

    <!-- text fonts -->
    <link rel="stylesheet" href="/assets/css/fonts.googleapis.com.css"/>

    <!-- ace styles -->
    <link rel="stylesheet" href="/assets/css/ace.min.css" class="ace-main-stylesheet" id="main-ace-style"/>

    <!--[if lte IE 9]>
    <link rel="stylesheet" href="/assets/css/ace-part2.min.css" class="ace-main-stylesheet"/>
    <![endif]-->
    <link rel="stylesheet" href="/assets/css/ace-skins.min.css"/>
    <link rel="stylesheet" href="/assets/css/ace-rtl.min.css"/>

    <!--[if lte IE 9]>
    <link rel="stylesheet" href="/assets/css/ace-ie.min.css"/>
    <![endif]-->

    <!-- inline styles related to this page -->

    <!-- ace settings handler -->
    <script src="/assets/js/ace-extra.min.js"></script>

    <!-- HTML5shiv and Respond.js for IE8 to support HTML5 elements and media queries -->

    <!--[if lte IE 8]>
    <script src="/assets/js/html5shiv.min.js"></script>
    <script src="/assets/js/respond.min.js"></script>
    <![endif]-->
</head>

<body class="no-skin">
<div id="navbar" class="navbar navbar-default          ace-save-state">
    <div class="navbar-container ace-save-state" id="navbar-container">
        <button type="button" class="navbar-toggle menu-toggler pull-left" id="menu-toggler" data-target="#sidebar">
            <span class="sr-only">Toggle sidebar</span>

            <span class="icon-bar"></span>

            <span class="icon-bar"></span>

            <span class="icon-bar"></span>
        </button>

        <div class="navbar-header pull-left">
            <a href="index.html" class="navbar-brand">
                <small>
                    <img src="image/e.png" width=”1” height=”1”/> 
                    人体运动测试数据分析与管理系统
                </small>
            </a>
        </div>

        <div class="navbar-buttons navbar-header pull-right" role="navigation">
            <ul class="nav ace-nav">

                <li class="light-blue dropdown-modal">
                    <a data-toggle="dropdown" href="#" class="dropdown-toggle">

                        <img class="nav-user-photo us_photo" src="/assets/images/avatars/user.jpg" alt="个人头像"
                             style="background-color:#fff"/>

                        <span class="user-info">
							       <span id="us_name"></span>   <!--显示当前用户 -->
								</span>

                        <i class="ace-icon fa fa-caret-down"></i>
                    </a>

                    <ul class="user-menu dropdown-menu-right dropdown-menu dropdown-yellow dropdown-caret dropdown-close">
                        <li>
                            <a id="setting" target="_blank">
                                <i class="ace-icon fa fa-cog"></i> 设置
                            </a>
                        </li>

                        <li>
                            <a id="profile" target="_blank">
                                <i class="ace-icon fa fa-user"></i> 个人信息
                            </a>
                        </li>

                        <li class="divider"></li>

                        <li>
                            <a href="/login.html" onclick="logout()">
                                <i class="ace-icon fa fa-power-off"></i> 注销
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
    <!-- /.navbar-container -->
</div>

<div class="main-container ace-save-state" id="main-container">
    <script type="text/javascript">
        try {
            ace.settings.loadState('main-container')
        } catch (e) {
        }
    </script>

    <div id="sidebar" class="sidebar                  responsive                    ace-save-state">
        <script type="text/javascript">
            try {
                ace.settings.loadState('sidebar')
            } catch (e) {
            }
        </script>

        
        <div id="lefter"></div>
    </div>

    <div class="main-content">
        <div class="main-content-inner">
            <div class="breadcrumbs ace-save-state" id="breadcrumbs">
                <ul class="breadcrumb">
                    <li>
                        <i class="ace-icon fa fa-home home-icon"></i>
                        <a href="/view/index.html">我的首页</a>
                    </li>

                </ul>
                <!-- /.breadcrumb -->

            </div>

            <div class="page-content">

                <div class="row">
                    <div class="col-xs-12">
                        <!-- PAGE CONTENT BEGINS -->
                        <div class="">
                         <!--    <button type="button" class="close" data-dismiss="alert">
                                <i class="ace-icon fa fa-times"></i>
                            </button> -->

                            <i class="ace-icon fa fa-check black"></i>
                            <span style="font-size: 15px;">欢迎使用&nbsp;</span>
                            <strong class="black" style="font-size: 15px;color:#000000;">
                                <span style="font-size: 15px;">人体运动测试数据分析与管理系统</span> 
                                <small>(v 1.0)</small>
                            </strong>
                                <br>
                                <span style="font-size: 15px;">系统旨在对测试数据进行自动化管理，方便对不同种类的数据进行自定义查找和分析对比。
                                    对人体运动测试数据进行分类管理，数据分析和上传下载。
                                </span>
                                <br>
                                <br>
                                <span style="font-size: 15px;">
                                    系统主要分为以下五个模块：
                                </span>
                                <br>
                                <strong class="black" style="font-size: 15px;color:#000000;">
                                <span style="font-size: 15px;">
                                    &nbsp;&nbsp;&nbsp;&nbsp;数据管理：
                                </span>
                                </strong>
                                <span style="font-size: 15px;">
                                    	分别负责对录入系统的数据进行分类管理，查找，修改以及数据下载。<br>
                                </span>
                                <strong class="black" style="font-size: 15px;color:#000000;">
                                <span style="font-size: 15px;">
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;基础信息管理：
                                </span>
                                </strong>
                                <span style="font-size: 15px;">
                                    	实验相关的信息管理。例如：实验对象、实验条件等信息管理。<br>
                                </span>
                                <strong class="black" style="font-size: 15px;color:#000000;">
                                <span style="font-size: 15px;">
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;数据文件管理：

                                </span>
                                </strong>
                                <span style="font-size: 15px;">
                                    	实验是得到的测试数据的管理。例如：运动学与动力学数据，肌电数据，耗氧量数据等。

                                </span>
                                <br>
                                <strong class="black" style="font-size: 15px;color:#000000;">
                                <span style="font-size: 15px;">
                                    &nbsp;&nbsp;&nbsp;&nbsp;指标分析：
                                </span>
                                </strong>
                                <span style="font-size: 15px;">
                                    	此模块用于系统实验的各类指标的展示与分析。<br>
                                </span>
                                <strong class="black" style="font-size: 15px;color:#000000;">
                                <span style="font-size: 15px;">
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;运动学特性分析：
                                </span>
                                </strong>
                                <span style="font-size: 15px;">
                                    	该模块主要实现了运动学相关指标的算法和运动学数据的可视化。
                                </span>
                                <br>
                                <strong class="black" style="font-size: 15px;color:#000000;">
                                <span style="font-size: 15px;">
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;动力学特性分析：
                                </span>
                                </strong>
                                <span style="font-size: 15px;">
                                    	该模块主要实现了动力学数据的可视化，。
                                </span>
                                <br>
                                <strong class="black" style="font-size: 15px;color:#000000;">
                                <span style="font-size: 15px;">
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;效能特性分析：
                                </span>
                                </strong>
                                <span style="font-size: 15px;">
                                    	本模块主要包括肌电数据分析、关节功率数据可视化、被动性指标计算等功能。
                                </span>
                                <br>
                                <strong class="black" style="font-size: 15px;color:#000000;">
                                <span style="font-size: 15px;">
                                    &nbsp;&nbsp;&nbsp;&nbsp;数据分析：
                                </span>
                                </strong>
                                <span style="font-size: 15px;">
                                    	对不同数据之间的关系进行分析。<br>
                                </span>
                                <strong class="black" style="font-size: 15px;color:#000000;">
                                <span style="font-size: 15px;">
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;步态周期分析：
                                </span>
                                </strong>
                                <span style="font-size: 15px;">
                                    	使用matlab程序对指定数据进行处理，生成步态周期图像。
                                </span>
                                <br>
                                <strong class="black" style="font-size: 15px;color:#000000;">
                                <span style="font-size: 15px;">
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;主成分分析：
                                </span>
                                </strong>
                                <span style="font-size: 15px;">
                                    	使用python程序对选定数据文件进行主成分分析，并生成测试分析报告。
                                </span>
                                <br>
                                <strong class="black" style="font-size: 15px;color:#000000;">
                                <span style="font-size: 15px;">
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;运动辨识分析：
                                </span>
                                </strong>
                                <span style="font-size: 15px;">
                                    	使用python程序应用隐马尔可夫模型进行运动辨识，并生成结果。
                                </span>
                                <br>
                                <strong class="black" style="font-size: 15px;color:#000000;">
                                <span style="font-size: 15px;">
                                    &nbsp;&nbsp;&nbsp;&nbsp;文件操作：
                                </span>
                                </strong>
                                <span style="font-size: 15px;">
                                    	对测试数据的数据库录入功能。<br>
                                </span>
                                <strong class="black" style="font-size: 15px;color:#000000;">
                                <span style="font-size: 15px;">
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;原始测试数据文件上传：
                                </span>
                                </strong>
                                <span style="font-size: 15px;">
                                    	上传测试得到的原始数据。<br>
                                </span>
                                <strong class="black" style="font-size: 15px;color:#000000;">
                                <span style="font-size: 15px;">
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;修改数据文件上传：
                                </span>
                                </strong>
                                <span style="font-size: 15px;">
                                    	对原始“运动学与动力学数据”修改后单独上传。<br>
                                </span>
                                <strong class="black" style="font-size: 15px;color:#000000;">
                                <span style="font-size: 15px;">
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;步态周期图像文件上传：
                                </span>
                                </strong>
                                <span style="font-size: 15px;">
                                    	上传实验过程中的图像和视频上传，可以批量上传和单个上传。
                                </span>
                                <br>
                                <strong class="black" style="font-size: 15px;color:#000000;">
                                <span style="font-size: 15px;">
                                    &nbsp;&nbsp;&nbsp;&nbsp;文献管理：
                                </span>
                                </strong>
                                <span style="font-size: 15px;">
                                    	文献文件的导入与增删改查操作。<br>
                                </span>
                                <strong class="black" style="font-size: 15px;color:#000000;">
                                <span style="font-size: 15px;">
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;文献查询：
                                </span>
                                </strong>
                                <span style="font-size: 15px;">
                                    	此模块对上传到系统的文献文件信息进行管理，可进行增删改查操作。<br>
                                </span>
                                <strong class="black" style="font-size: 15px;color:#000000;">
                                <span style="font-size: 15px;">
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;批量文献上传：
                                </span>
                                </strong>
                                <span style="font-size: 15px;">
                                    	此模块用于批量上传文献文件，用户需按照日期设立文件夹(命名格式:2020-02-23)，一次可上传多个日期文件夹<br>
                                </span>
                                <strong class="black" style="font-size: 15px;color:#000000;">
                                <span style="font-size: 15px;">
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;单个文献上传：
                                </span>
                                </strong>
                                <span style="font-size: 15px;">
                                    	此模块用于上传单个文献文件，并可输入相关备注信息一同上传。
                                </span>
                                <br>
                                <br>
                            </strong>
                        </div>

                        <div class="hr hr16 hr-dotted"></div>

                        <div class="row">

                        </div>
                        <!-- /.row -->

                        <!-- PAGE CONTENT ENDS -->
                    </div>
                    <!-- /.col -->
                </div>
                <!-- /.row -->
            </div>
            <!-- /.page-content -->
        </div>
    </div>
    <!-- /.main-content -->

    <div id="footer">

    </div>

    <a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
        <i class="ace-icon fa fa-angle-double-up icon-only bigger-110"></i>
    </a>
</div>
<!-- /.main-container -->

<!-- basic scripts -->

<!--[if !IE]> -->
<script src="/assets/js/jquery-2.1.4.min.js"></script>
<script src="/assets/js/jquery.cookie.js"></script>
<script src="/assets/js/ssm2.util.js"></script>
<!--相当于jsp页面中的header，将每个页面的右上角当做一个模块，相关链接功能以及获取cookie中用户名的功能放在ssm2.util.js中实现  -->
<!--  <script src="/assets/js/sddb.util.js"></script>  -->

<!-- <![endif]-->

<!--[if IE]>
<script src="/assets/js/jquery-1.11.3.min.js"></script>
<![endif]-->
<script type="text/javascript">
    if ('ontouchstart' in document.documentElement) document.write("<script src='/assets/js/jquery.mobile.custom.min.js'>" + "<" + "/script>");
</script>
<script src="/assets/js/bootstrap.min.js"></script>

<!-- page specific plugin scripts -->

<!--[if lte IE 8]>
<script src="/assets/js/excanvas.min.js"></script>
<![endif]-->
<script src="/assets/js/jquery-ui.custom.min.js"></script>
<script src="/assets/js/jquery.ui.touch-punch.min.js"></script>
<script src="/assets/js/jquery.easypiechart.min.js"></script>
<script src="/assets/js/jquery.sparkline.index.min.js"></script>
<script src="/assets/js/jquery.flot.min.js"></script>
<script src="/assets/js/jquery.flot.pie.min.js"></script>
<script src="/assets/js/jquery.flot.resize.min.js"></script>

<!-- ace scripts -->
<script src="/assets/js/ace-elements.min.js"></script>
<script src="/assets/js/ace.min.js"></script>

<!-- inline scripts related to this page -->

<!--获得通知公告-->
<script type="text/javascript">
    /* 			//将点击的公告id设置进cookie中
                function setNoticeId(no_id) {
                    $.cookie("no_id", no_id, {
                        path: "/"
                    });
                }

                jQuery(function($) {

                    //获得用户上次选择的数字
                    var notice_number = $.cookie("notice_number");
                    if(notice_number != null) {
                        $("#notice_number").val(notice_number);
                    } else {
                        $("#notice_number").val("3");
                    }
                    getNotice();
                    $("#notice_number").change(function() {
                        getNotice();
                        //保存至cookie中
                        $.cookie("notice_number", $("#notice_number").val(), {
                            path: "/"
                        });
                    });
                    $("#reload1").click(function() {
                        getNotice();
                    });
                });

                function getNotice() {
                    $.ajax({
                        type: "post",
                        url: "/notice/findSome.do",
                        dataType: "json",
                        data: {
                            "number": $("#notice_number").val()
                        },
                        success: function(data) {

                            //将内容赋值进标签内

                            var notice_content = document.getElementById("notice_content");

                            //清除之前行
                            notice_content.innerHTML = "";
                            var color = ["alert alert-warning", "alert alert-info", "alert alert-success"];

                            for(var i = 0; i < data.length; i++) {

                                var div_notice = document.createElement("div");
                                var p_title = document.createElement("p");
                                div_notice.setAttribute("class", color[i % 3]);
                                var pic_title = "<a href='' onclick='return false' style='margin-right:3px'> <span class='orange fa fa-bullhorn'></span></a>"
                                p_title.innerHTML = pic_title + "&nbsp;" + data[i].no_title + "&nbsp;&nbsp;" + "<a href='/views/notice/noticeDetail.html' target='_blank' onclick='setNoticeId(" + data[i].no_id + ")'>[详情] </a>";
                                p_title.setAttribute("style", "font-size: 16px;");

                                //创建用户与创建日期
                                var p_user = document.createElement("span");
                                var p_time = document.createElement("span");;
                                var pic_user = "<a href='' onclick='return false' style='margin-right:3px'> <span class='orange glyphicon  glyphicon-user'></span></a>"
                                p_user.innerHTML = pic_user + "&nbsp;" + data[i].no_user_name;
                                p_user.setAttribute("style", "font-size: 16px;");
                                var pic_time = "<a href='' onclick='return false' style='margin-right:3px'> <span class='orange glyphicon  glyphicon-time'></span></a>"
                                p_time.innerHTML = pic_time + "&nbsp;" + timestampToTime(data[i].no_create_time);
                                p_time.setAttribute("style", "float: right;font-size: 16px;");

                                div_notice.appendChild(p_title);
                                div_notice.appendChild(p_user);
                                div_notice.appendChild(p_time);
                                notice_content.appendChild(div_notice);

                            }
                        },
                        error: function(err) {
                            alert("获取公告出现错误！");
                        }

                    });
                }; */
</script>

<!--获取留言概括记录-->
<script>
    /* 	jQuery(function($) {

            //获得用户上次选择的数字
            var message_number = $.cookie("message_number");
            if(message_number != null) {
                $("#message_number").val(message_number);
            } else {
                $("#message_number").val("3");
            }
            getMessage();
            $("#message_number").change(function() {
                getMessage();
                //保存至cookie中
                $.cookie("message_number", $("#message_number").val(), {
                    path: "/"
                });
            });
            $("#reload2").click(function() {
                getMessage();
            });
        });

        function getMessage() {
            $.ajax({
                type: "post",
                url: "/leaveMessage/getMessage",
                dataType: "json",
                data: {
                    id: $.cookie("us_id"),
                    number: $("#message_number").val()
                },

                success: function(data) {
                    //将内容赋值进标签内

                    var message_content = document.getElementById("message_content");

                    //清除之前行
                    message_content.innerHTML = "";
                    var color = ["alert alert-danger", "alert alert-success", "alert alert-info"];

                    for(var i = 0; i < data.length; i++) {
                        var div_message = document.createElement("div");
                        var p_title = document.createElement("p");
                        div_message.setAttribute("class", color[i % 3]);
                        var pic_user = "<a href='' onclick='return false' style='margin-right:3px'> <span class='orange glyphicon  glyphicon-user'></span></a>"
                        var pic_time = "<a href='' onclick='return false' style='margin-right:3px'> <span class='orange glyphicon  glyphicon-time'></span></a>"
                        var title;
                        if(data[i].leaveMessage.le_author_id == $.cookie("us_id")) {
                            title = pic_user + "&nbsp;" + data[i].target_name + "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" + pic_time + "&nbsp;" + timestampToTime(data[i].leaveMessage.le_time);
                        } else {
                            title = pic_user + "&nbsp;" + data[i].author_name + "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" + pic_time + "&nbsp;" + timestampToTime(data[i].leaveMessage.le_time);
                        }
                        p_title.innerHTML = title;
                        p_title.setAttribute("style", "font-size: 16px;");

                        //留言内容
                        var p_content = document.createElement("p");
                        var pic_content = "<a href='' onclick='return false' style='margin-right:3px'> <span class='orange fa  fa-comment'></span></a>"

                        p_content.innerHTML = pic_content + "&nbsp;" + data[i].leaveMessage.le_content;
                        //我已读、未读、对方已读、对方未读，则加入图标进行提示
                        if((data[i].leaveMessage.le_author_id != $.cookie("us_id")) && (!data[i].leaveMessage.le_read)) {
                            p_content.innerHTML += "&nbsp;&nbsp;" + "<span class='badge badge-danger'>未读</span>";
                        } else if((data[i].leaveMessage.le_author_id != $.cookie("us_id")) && (data[i].leaveMessage.le_read)) {
                            p_content.innerHTML += "&nbsp;&nbsp;" + "<span class='badge badge-success'>已读</span>";
                        } else if((data[i].leaveMessage.le_author_id == $.cookie("us_id")) && (data[i].leaveMessage.le_read)) {
                            p_content.innerHTML += "&nbsp;&nbsp;" + "<span class='badge badge-pink'>对方已读</span>";
                        } else if((data[i].leaveMessage.le_author_id == $.cookie("us_id")) && (!data[i].leaveMessage.le_read)) {
                            p_content.innerHTML += "&nbsp;&nbsp;" + "<span class='badge badge-yellow'>对方未读</span>";
                        }
                        var other_id = (data[i].leaveMessage.le_author_id == $.cookie("us_id")) ? data[i].leaveMessage.le_target_id : data[i].leaveMessage.le_author_id;

                        p_content.innerHTML += "&nbsp;&nbsp;" + "<a href='/views/leaveMessage/leaveDetail.html?other_id=" + other_id + "' target='_blank'>[详情] </a>";;
                        p_content.setAttribute("style", "font-size: 16px;");

                        div_message.appendChild(p_title);
                        div_message.appendChild(p_content);
                        message_content.appendChild(div_message);

                    }
                },
                error: function(err) {
                    alert("获取留言记录失败...");
                }
            });
        } */
</script>

<script>
    $("#lefter").load("/view/lefter.html");
</script>


<!--获取到login.html页面塞入cookie的us_name，并放在<span id="us_name"></span>  -->
<script type="text/javascript">
    jQuery(function ($) {
        //显示用户名
        $("#us_name").html($.cookie("us_name"));
    });
</script>


<script type="text/javascript">
    jQuery(function ($) {
        //显示用户名
        $("#us_name").html($.cookie("us_name"));
        $("#profile").attr("href", "/view/userInformation/userProfile.html?id=" + $.cookie("us_id"));
        $("#setting").attr("href", "/view/userInformation/userSetting.html");
    });
</script>

<script>
    $("#footer").load("/view/footer.html");
</script>


<script type="text/javascript">
    $(function () {
        $("#open").click(function () {
            //清空之前的行
            $.ajax({
                type: "post",
                url: "/admin/open",
            });
        });
    });


    jQuery(function ($) {
        $('.easy-pie-chart.percentage').each(function () {
            var $box = $(this).closest('.infobox');
            var barColor = $(this).data('color') || (!$box.hasClass('infobox-dark') ? $box.css('color') : 'rgba(255,255,255,0.95)');
            var trackColor = barColor == 'rgba(255,255,255,0.95)' ? 'rgba(255,255,255,0.25)' : '#E2E2E2';
            var size = parseInt($(this).data('size')) || 50;
            $(this).easyPieChart({
                barColor: barColor,
                trackColor: trackColor,
                scaleColor: false,
                lineCap: 'butt',
                lineWidth: parseInt(size / 10),
                animate: ace.vars['old_ie'] ? false : 1000,
                size: size
            });
        })

        $('.sparkline').each(function () {
            var $box = $(this).closest('.infobox');
            var barColor = !$box.hasClass('infobox-dark') ? $box.css('color') : '#FFF';
            $(this).sparkline('html', {
                tagValuesAttribute: 'data-values',
                type: 'bar',
                barColor: barColor,
                chartRangeMin: $(this).data('min') || 0
            });
        });

        //flot chart resize plugin, somehow manipulates default browser resize event to optimize it!
        //but sometimes it brings up errors with normal resize event handlers
        $.resize.throttleWindow = false;

        var placeholder = $('#piechart-placeholder').css({
            'width': '90%',
            'min-height': '150px'
        });
        var data = [{
            label: "social networks",
            data: 38.7,
            color: "#68BC31"
        },
            {
                label: "search engines",
                data: 24.5,
                color: "#2091CF"
            },
            {
                label: "ad campaigns",
                data: 8.2,
                color: "#AF4E96"
            },
            {
                label: "direct traffic",
                data: 18.6,
                color: "#DA5430"
            },
            {
                label: "other",
                data: 10,
                color: "#FEE074"
            }
        ]

        function drawPieChart(placeholder, data, position) {
            $.plot(placeholder, data, {
                series: {
                    pie: {
                        show: true,
                        tilt: 0.8,
                        highlight: {
                            opacity: 0.25
                        },
                        stroke: {
                            color: '#fff',
                            width: 2
                        },
                        startAngle: 2
                    }
                },
                legend: {
                    show: true,
                    position: position || "ne",
                    labelBoxBorderColor: null,
                    margin: [-30, 15]
                },
                grid: {
                    hoverable: true,
                    clickable: true
                }
            })
        }

        drawPieChart(placeholder, data);

        /**
         we saved the drawing function and the data to redraw with different position later when switching to RTL mode dynamically
         so that's not needed actually.
         */
        placeholder.data('chart', data);
        placeholder.data('draw', drawPieChart);

        //pie chart tooltip example
        var $tooltip = $("<div class='tooltip top in'><div class='tooltip-inner'></div></div>").hide().appendTo('body');
        var previousPoint = null;

        placeholder.on('plothover', function (event, pos, item) {
            if (item) {
                if (previousPoint != item.seriesIndex) {
                    previousPoint = item.seriesIndex;
                    var tip = item.series['label'] + " : " + item.series['percent'] + '%';
                    $tooltip.show().children(0).text(tip);
                }
                $tooltip.css({
                    top: pos.pageY + 10,
                    left: pos.pageX + 10
                });
            } else {
                $tooltip.hide();
                previousPoint = null;
            }

        });

        /////////////////////////////////////
        $(document).one('ajaxloadstart.page', function (e) {
            $tooltip.remove();
        });

        var d1 = [];
        for (var i = 0; i < Math.PI * 2; i += 0.5) {
            d1.push([i, Math.sin(i)]);
        }

        var d2 = [];
        for (var i = 0; i < Math.PI * 2; i += 0.5) {
            d2.push([i, Math.cos(i)]);
        }

        var d3 = [];
        for (var i = 0; i < Math.PI * 2; i += 0.2) {
            d3.push([i, Math.tan(i)]);
        }

        var sales_charts = $('#sales-charts').css({
            'width': '100%',
            'height': '220px'
        });
        $.plot("#sales-charts", [{
            label: "Domains",
            data: d1
        },
            {
                label: "Hosting",
                data: d2
            },
            {
                label: "Services",
                data: d3
            }
        ], {
            hoverable: true,
            shadowSize: 0,
            series: {
                lines: {
                    show: true
                },
                points: {
                    show: true
                }
            },
            xaxis: {
                tickLength: 0
            },
            yaxis: {
                ticks: 10,
                min: -2,
                max: 2,
                tickDecimals: 3
            },
            grid: {
                backgroundColor: {
                    colors: ["#fff", "#fff"]
                },
                borderWidth: 1,
                borderColor: '#555'
            }
        });

        $('#recent-box [data-rel="tooltip"]').tooltip({
            placement: tooltip_placement
        });

        function tooltip_placement(context, source) {
            var $source = $(source);
            var $parent = $source.closest('.tab-content')
            var off1 = $parent.offset();
            var w1 = $parent.width();

            var off2 = $source.offset();
            //var w2 = $source.width();

            if (parseInt(off2.left) < parseInt(off1.left) + parseInt(w1 / 2)) return 'right';
            return 'left';
        }

        $('.dialogs,.comments').ace_scroll({
            size: 300
        });

        //Android's default browser somehow is confused when tapping on label which will lead to dragging the task
        //so disable dragging when clicking on label
        var agent = navigator.userAgent.toLowerCase();
        if (ace.vars['touch'] && ace.vars['android']) {
            $('#tasks').on('touchstart', function (e) {
                var li = $(e.target).closest('#tasks li');
                if (li.length == 0) return;
                var label = li.find('label.inline').get(0);
                if (label == e.target || $.contains(label, e.target)) e.stopImmediatePropagation();
            });
        }

        $('#tasks').sortable({
            opacity: 0.8,
            revert: true,
            forceHelperSize: true,
            placeholder: 'draggable-placeholder',
            forcePlaceholderSize: true,
            tolerance: 'pointer',
            stop: function (event, ui) {
                //just for Chrome!!!! so that dropdowns on items don't appear below other items after being moved
                $(ui.item).css('z-index', 'auto');
            }
        });
        $('#tasks').disableSelection();
        $('#tasks input:checkbox').removeAttr('checked').on('click', function () {
            if (this.checked) $(this).closest('li').addClass('selected');
            else $(this).closest('li').removeClass('selected');
        });

        //show the dropdowns on top or bottom depending on window height and menu position
        $('#task-tab .dropdown-hover').on('mouseenter', function (e) {
            var offset = $(this).offset();

            var $w = $(window)
            if (offset.top > $w.scrollTop() + $w.innerHeight() - 100)
                $(this).addClass('dropup');
            else $(this).removeClass('dropup');
        });

    })
</script>
</body>

</html>